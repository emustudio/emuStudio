[[format]]
# Altair 8" floppy disks
# CP/M 1.4; simh BIOS
#
# https://retrocmp.de/hardware/altair-8800/altair-floppy.htm
# https://altairclone.com/downloads/roms/M%20Eberhard%20Improved%20ROMs/CDBL%20Manual.pdf
# https://deramp.com/downloads/mfe_archive/010-S100%20Computers%20and%20Boards/00-MITS/40-Software/DSK%20Disk%20Images/Altair%20cpm%20Disk%20Images/Burcon%20(MITS)%20CPM.pdf
#
# Tested on:
# cpm1.dsk    https://schorn.ch/cpm/zip/cpm1.zip
id = 'cpm1-simh'
sectorSize = 137
sectorSkew = 6
sectorOps = 'altair-floppy-mits'
bcInterpretsAsUnused = false
dateFormat = 'NOT_USED'

[format.dpb]
driveSpt = 32
spt = 26
bsh = 3
# or blm = 7
dsm = 242
drm = 63
al0 = 0xC0 # 11000000 00000000
al1 = 0
ofs = 2



[[format]]
# Altair 8" floppy disks
# CP/M 2.2; simh BIOS
#
# https://retrocmp.de/hardware/altair-8800/altair-floppy.htm
# https://altairclone.com/downloads/roms/M%20Eberhard%20Improved%20ROMs/CDBL%20Manual.pdf
# https://deramp.com/downloads/mfe_archive/010-S100%20Computers%20and%20Boards/00-MITS/40-Software/DSK%20Disk%20Images/Altair%20cpm%20Disk%20Images/Burcon%20(MITS)%20CPM.pdf
#
# Tested on:
# altcpm.dsk    http://cpmarchives.classiccmp.org/cpm/mirrors/www.schorn.ch/cpm/zip/altsw.zip
#
id = 'cpm2-simh'
sectorSize = 137
sectorSkew = 17
sectorOps = 'altair-floppy-mits'
bcInterpretsAsUnused = false
dateFormat = 'NOT_USED'

[format.dpb]
driveSpt = 32
spt = 32
bsh = 3
# or blm = 7
dsm = 254
drm = 255
al0 = 0xFF
al1 = 0
ofs = 6

[[format]]
# Altair 8" floppy disks
# CP/M 3; simh BIOS
#
# https://retrocmp.de/hardware/altair-8800/altair-floppy.htm
# https://altairclone.com/downloads/roms/M%20Eberhard%20Improved%20ROMs/CDBL%20Manual.pdf
# https://deramp.com/downloads/mfe_archive/010-S100%20Computers%20and%20Boards/00-MITS/40-Software/DSK%20Disk%20Images/Altair%20cpm%20Disk%20Images/Burcon%20(MITS)%20CPM.pdf
#
# Tested on:
#
# cpm3.dsk        https://schorn.ch/cpm/zip/cpm3.zip
# z80dos.dsk      https://schorn.ch/cpm/zip/z80dos.zip
# zsdos.dsk       https://schorn.ch/cpm/zip/zsdos.zip
# superdos.dsk    https://schorn.ch/cpm/zip/superdos.zip
# cpm1dev.dsk     https://schorn.ch/cpm/zip/cpm1.zip

id = 'cpm3-simh'
sectorSize = 137
sectorSkew = 17
sectorOps = 'altair-floppy-mits'
bcInterpretsAsUnused = false
dateFormat = 'NOT_USED'

[format.dpb]
driveSpt = 32
spt = 32
bsh = 4
# or blm = 15
dsm = 0x07F9
drm = 0x03FF
al0 = 0xF0
al1 = 0
ofs = 6

[[format]]
# Altair 8" floppy disks
# CP/M 2.2; simh ZSDOS BIOS (https://www.seasip.info/Cpm/dosses.html)

# Timestamps are supported by a loadable module, so either the CP/M 3 style or the DateStamper
# style can be used.
#
# Tested on:
# zsdos.dsk       https://schorn.ch/cpm/zip/zsdos.zip

id = 'cpm2-zsdos-simh'
sectorSize = 137
sectorSkew = 17
sectorOps = 'altair-floppy-mits'
bcInterpretsAsUnused = false

# 21 C1 C1 C1 C1 M1 M1 M1 M1 00 00 C2 C2 C2 C2 M2
# M2 M2 M2 00 00 C3 C3 C3 C3 M3 M3 M3 M3 00 00 00
dateFormat = 'NATIVE2'

[format.dpb]
driveSpt = 32
spt = 32
bsh = 4
# or blm = 15
dsm = 0x07F9
drm = 0x03FF
al0 = 0xF0
al1 = 0
ofs = 6

[[format]]
# Altair 8" floppy disks, 77 tracks
# https://deramp.com/downloads/altair/hardware/8_inch_floppy/
# https://deramp.com/downloads/altair/software/8_inch_floppy/CPM/CPM%203.0/BIOS.ASM
# https://deramp.com/downloads/altair/software/8_inch_floppy/CPM/CPM%203.0/ReadMe.pdf
#
# Tested on:
#
id = 'cpm3-altair8-deramp'
sectorSize = 137
#sectorSkew = 17

# The skew is based on the track as:
#	Tracks 0-5, secOut = secIn
#	Tracks 6-76, secOut = (secIn * 17) MOD 32
# The skew computation for tracks 6-76 is implemented as:
#	secOut = secIn if secIn is even
#	secOut = secIn XOR 10h if secIn is odd
sectorSkewTable = [0, 17, 2, 19, 4, 21, 6, 23, 8, 25, 10, 27, 12, 29, 14, 31, 16, 1, 18, 3, 20, 5, 22, 7, 24, 9, 26, 11, 28, 13, 30, 15]
sectorOps = 'altair-floppy-deramp'
bcInterpretsAsUnused = false
dateFormat = 'NATIVE2'

[format.dpb]
driveSpt = 32
spt = 32
bsh = 4
# or blm = 15
dsm = 149    # max block number (150 blocks of 2K bytes)
drm = 63     # max directory entry number (64 entries)
al0 = 0xC0
al1 = 0
ofs = 2

#RESTRK	equ	2		;reserved tracks for boot image

[[format]]
# Altair 5.25" minidisk, 35 tracks
# https://deramp.com/downloads/altair/hardware/minidisk/
# https://deramp.com/downloads/altair/software/8_inch_floppy/CPM/CPM%203.0/BIOS.ASM
# https://deramp.com/downloads/altair/software/8_inch_floppy/CPM/CPM%203.0/ReadMe.pdf
#
# Tested on:
#
id = 'cpm3-minidisk-deramp'
sectorSize = 137
#sectorSkew = 17

# The skew is based on the track as:
#	Tracks 0-5, secOut = secIn
#	Tracks 6-76, secOut = (secIn * 17) MOD 32
# The skew computation for tracks 6-76 is implemented as:
#	secOut = secIn if secIn is even
#	secOut = secIn XOR 10h if secIn is odd
sectorSkewTable = [0, 17, 2, 19, 4, 21, 6, 23, 8, 25, 10, 27, 12, 29, 14, 31, 16, 1, 18, 3, 20, 5, 22, 7, 24, 9, 26, 11, 28, 13, 30, 15]
sectorOps = 'altair-minidisk-deramp'
bcInterpretsAsUnused = false
dateFormat = 'NATIVE2'

[format.dpb]
driveSpt = 16
spt = 16
bsh = 3
# or blm = 7
dsm = 61    # max block number (62 blocks of 1K bytes)
drm = 31     # max directory entry number (32 entries)
al0 = 0x80
al1 = 0
ofs = 4
#RESTRK	equ	4		;reserved tracks for boot image
