---
layout: default
title: BrainDuck
nav_order: 4
has_children: true
---

:imagepath: brainduck/images/

== Introduction

BrainDuck is an abstract computer for emuStudio, which mimics http://en.wikipedia.org/wiki/Brainfuck[brainfuck]
programming language. Originally, brainfuck was developed by
http://esolangs.org/wiki/Urban_M%C3%BCller[Urban Miller] and it is well-known fact that the language
has minimalistic compiler and it's eight instructions don't prevent it to be Turing complete. Also,
there exist many extensions of the language and there are organized programming contests in
brainfuck worldwide. But all of that can be read at Wikipedia or at other sources.

BrainDuck architecture is just a name for virtual computer in emuStudio, and consists of these
plug-ins:

- `brainc-brainduck`: Compiler of brainfuck language (original, without extensions)
- `brainduck-cpu`: Brainfuck emulator acting like CPU with two registers
- `brainduck-mem`: Virtual operating memory which holds both compiled brainfuck program and data
- `brainduck-terminal`: Virtual terminal for displaying the output and requesting for input.

All these plug-ins are free software, released under GNU GPL v2 license. The source code is freely
available online.

Implementation language is Java SE 8. The implementation technology of visual components is Java
Swing. All plug-ins use library `emuLib` version `9.0.0`.

[[XIB]]
== Brief description

BrainDuck is implemented as http://en.wikipedia.org/wiki/Von_Neumann_architecture[von Neumann architecture]. It implies that the program and data are shared in the single memory. This is not
a common approach of implementing brainfuck interpreters, and it might be changed in the future.

As implementing a brainfuck interpreter, one must deal with several http://en.wikipedia.org/wiki/Brainfuck#Portability_issues[portability issues], which include:

- Memory cell size (solved in `brainduck-memory` and `brainduck-cpu`)
- Memory size (number of memory cells) (solved in `brainduck-memory`)
- End-of-line code (solved in `brainduck-terminal`)
- End-of-file behavior (solved in `brainduck-cpu` and `brainduck-terminal`)

The solution is spread across the plug-ins, as you can see in the parentheses. Chapters devoted
to plug-ins' description contain specific information.

[[XII]]
== Installation and run

At first, please download and install emuStudio distribution. BrainDuck is already included and
ready for use.

[[XIID]]
=== Directory structure

For further manipulation with BrainDuck-specific files, here's the file organization in directories:

- `config/BrainDuck.conf`: configuration file of BrainDuck architecture. Can be edited in schema
                           editor of emuStudio
- `compilers/brainc-brainduck.jar`: BrainDuck compiler plug-in.
- `cpu/brainduck-cpu.jar`: BrainDuck emulator (CPU plug-in).
- `devices/brainduck-terminal.jar`: BrainDuck terminal device.
- `mem/brainduck-mem.jar`: BrainDuck operating memory plug-in.

BrainDuck compiler (as many other compilers in emuStudio) depends on Java CUP parser runtime library,
which is located at `lib/java-cup-runtime-0.11a.jar`.

[[XIIS]]
=== Abstract schema

In order to use BrainDuck, there must be drawn the abstract schema, saved in the configuration
file. Abstract schemas are drawn in the schema editor in emuStudio (please see emuStudio Main module
documentation for more details). The following image shows the schema of BrainDuck computer:

image::{imagepath}/schema.png[BrainDuck abstract schema]

The "->" arrows are in direction of dependency. So for example `brainc-brainduck` depends on
`brainduck-mem`, because compiled programs are directly loaded into memory.

Between `brainduck-cpu` and `brainduck-terminal` exists bidirectional dependency, because input
gained from terminal is passed to the CPU, and output is pushed from CPU to the terminal.

Plug-in `brainduck-cpu` also depends on `brainduck-mem`, because memory is a place where program
and data are stored.

