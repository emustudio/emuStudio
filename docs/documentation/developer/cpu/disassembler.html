<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Disassembler - Developer documentation for emuStudio</title> <link rel="shortcut icon" href="/documentation/developer/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/documentation/developer/assets/css/just-the-docs.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3492956-5"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', "UA-3492956-5"); </script> <script type="text/javascript" src="/documentation/developer/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/documentation/developer/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Disassembler | Developer documentation for emuStudio</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="Disassembler" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Developer documentation for emuStudio. emuStudio is universal emulation platform and framework targeting mainly academic sphere." /> <meta property="og:description" content="Developer documentation for emuStudio. emuStudio is universal emulation platform and framework targeting mainly academic sphere." /> <link rel="canonical" href="/documentation/developer/cpu/disassembler" /> <meta property="og:url" content="/documentation/developer/cpu/disassembler" /> <meta property="og:site_name" content="Developer documentation for emuStudio" /> <script type="application/ld+json"> {"description":"Developer documentation for emuStudio. emuStudio is universal emulation platform and framework targeting mainly academic sphere.","headline":"Disassembler","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/documentation/developer/assets/logo-1.svg"}},"@type":"WebPage","url":"/documentation/developer/cpu/disassembler","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="/documentation/developer" class="site-title lh-tight"> <div class="site-logo"></div> </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item active"><a href="/documentation/developer/404.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/developer/" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="/documentation/developer/introduction/" class="navigation-list-link">Introduction</a></li><li class="navigation-list-item"><a href="/documentation/developer/getting_started/" class="navigation-list-link">Getting started</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/documentation/developer/getting_started/contributing" class="navigation-list-link">How to contribute</a></li><li class="navigation-list-item "><a href="/documentation/developer/getting_started/gitflow" class="navigation-list-link">Git workflow</a></li><li class="navigation-list-item "><a href="/documentation/developer/getting_started/documenting" class="navigation-list-link">Documenting</a></li></ul></li><li class="navigation-list-item"><a href="/documentation/developer/plugin_basics/" class="navigation-list-link">Plugin basics</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/documentation/developer/plugin_basics/loading" class="navigation-list-link">Loading and initialization</a></li><li class="navigation-list-item "><a href="/documentation/developer/plugin_basics/context" class="navigation-list-link">Plugin contexts</a></li></ul></li><li class="navigation-list-item"><a href="/documentation/developer/compiler/" class="navigation-list-link">Writing a compiler</a></li><li class="navigation-list-item active"><a href="/documentation/developer/cpu/" class="navigation-list-link">Writing a CPU</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/documentation/developer/cpu/rootclass" class="navigation-list-link">Plugin Root</a></li><li class="navigation-list-item "><a href="/documentation/developer/cpu/runstate" class="navigation-list-link">Run states</a></li><li class="navigation-list-item "><a href="/documentation/developer/cpu/engine" class="navigation-list-link">Emulator engine</a></li><li class="navigation-list-item active"><a href="/documentation/developer/cpu/disassembler" class="navigation-list-link active">Disassembler</a></li></ul></li><li class="navigation-list-item"><a href="/documentation/developer/memory/" class="navigation-list-link">Writing a memory</a></li><li class="navigation-list-item"><a href="/documentation/developer/device/" class="navigation-list-link">Writing a device</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Developer documentation for emuStudio" aria-label="Search Developer documentation for emuStudio" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="/">Back to website</a></li> </ul> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/documentation/developer/cpu/">Writing a CPU</a></li> <li class="breadcrumb-nav-list-item"><span>Disassembler</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <h1 id="disassembler"> <a href="#disassembler" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Disassembler </h1> <p>Disassembler is not needed for the emulation itself. It is needed for emuStudio to be able to visually show the instructions. You can develop your own disassembler by implementing interface <a href="/documentation/developer/emulib_javadoc/net/emustudio/emulib/plugins/cpu/Disassembler.html" target="_blank">Disassembler</a> from emuLib. Or you can use <a href="https://github.com/emustudio/edigen" target="_blank">Edigen</a>, a disassembler generator for emuStudio.</p> <p><a href="https://github.com/emustudio/edigen" target="_blank">Edigen</a> works similarly as parser generator: developer writes a specification file. Then, <a href="https://github.com/emustudio/edigen" target="_blank">Edigen</a> (either from the command line or using <a href="https://github.com/emustudio/edigen-gradle-plugin" target="_blank">Gradle</a>) generates disassembler and decoder of the source code, using predefined templates, bundled in <a href="https://github.com/emustudio/edigen" target="_blank">Edigen</a>.</p> <p>Specification files have <code class="language-plaintext highlighter-rouge">.eds</code> file extension. A <a href="https://en.wikipedia.org/wiki/Manchester_Baby" target="_blank">SSEM</a> CPU specification file looks as follows:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>instruction = "JMP": line(5)     ignore8(8) 000 ignore16(16) |
              "JPR": line(5)     ignore8(8) 100 ignore16(16) |
              "LDN": line(5)     ignore8(8) 010 ignore16(16) |
              "STO": line(5)     ignore8(8) 110 ignore16(16) |
              "SUB": line(5)     ignore8(8) 001 ignore16(16) |
              "CMP": 00000       ignore8(8) 011 ignore16(16) |
              "STP": 00000       ignore8(8) 111 ignore16(16);

line = arg: arg(5);

ignore8 = arg: arg(8);

ignore16 = arg: arg(16);

%%

"%s %d" = instruction line(shift_left, shift_left, shift_left, bit_reverse, absolute) ignore8 ignore16;
"%s" = instruction ignore8 ignore16;
</code></pre></div></div> <p>The specification file might look a bit cryptic at first sight, but it’s quite easy. The content is divided into two sections, separated with two <code class="language-plaintext highlighter-rouge">%%</code> chars on a separate line. The first section contains rules which are used for parsing the instruction binary codes and assign labels to the codes. The second section specifies the disassembled string formats for particular rules.</p> <p>There can exist multiple rules, and rules can include another rules. If the rule includes the same rule recursively, it means it’s a constant. In that case, in the parenthesis after the rule inclusion must be a number of bits which the constant takes.</p> </div> </div> </div> </div> </body> </html>
