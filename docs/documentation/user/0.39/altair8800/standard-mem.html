<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Memory standard-mem - User documentation for emuStudio 0.39</title> <link rel="shortcut icon" href="/documentation/user/0.39/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/documentation/user/0.39/assets/css/just-the-docs.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3492956-5"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', "UA-3492956-5"); </script> <script type="text/javascript" src="/documentation/user/0.39/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/documentation/user/0.39/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Memory standard-mem | User documentation for emuStudio 0.39</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="Memory standard-mem" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="User documentation for emuStudio 0.39. emuStudio is universal emulation platform and framework targeting mainly academic sphere." /> <meta property="og:description" content="User documentation for emuStudio 0.39. emuStudio is universal emulation platform and framework targeting mainly academic sphere." /> <link rel="canonical" href="/documentation/user/0.39/altair8800/standard-mem" /> <meta property="og:url" content="/documentation/user/0.39/altair8800/standard-mem" /> <meta property="og:site_name" content="User documentation for emuStudio 0.39" /> <script type="application/ld+json"> {"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/documentation/user/0.39/assets/logo-1.svg"}},"description":"User documentation for emuStudio 0.39. emuStudio is universal emulation platform and framework targeting mainly academic sphere.","@type":"WebPage","headline":"Memory standard-mem","url":"/documentation/user/0.39/altair8800/standard-mem","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="/documentation/user/0.39" class="site-title lh-tight"> <div class="site-logo"></div> </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item active"><a href="/documentation/user/0.39/404.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/_doc/ram/abstractTape-ram.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="/documentation/user/0.39/introduction/" class="navigation-list-link">Introduction</a></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/_doc/ram/ram-cpu.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/_doc/ram/ram-intro.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/_doc/ram/ram-mem.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/_doc/ram/ramc-ram.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/_doc/rasp/rasp-cpu.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/_doc/rasp/rasp-intro.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/_doc/rasp/rasp-mem.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/_doc/rasp/raspc-rasp.html" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="/documentation/user/0.39/main-module/" class="navigation-list-link">Main module</a><ul class="navigation-list-child-list "></ul></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/altair8800/" class="navigation-list-link">MITS Altair8800</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/documentation/user/0.39/altair8800/as-8080" class="navigation-list-link">Assembler as-8080</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/altair8800/as-z80" class="navigation-list-link">Assembler as-z80</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/altair8800/8080-cpu" class="navigation-list-link">CPU 8080-cpu</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/altair8800/z80-cpu" class="navigation-list-link">CPU z80-cpu</a></li><li class="navigation-list-item active"><a href="/documentation/user/0.39/altair8800/standard-mem" class="navigation-list-link active">Memory standard-mem</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/altair8800/88-disk" class="navigation-list-link">Device 88-disk</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/altair8800/88-sio" class="navigation-list-link">Device 88-sio</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/altair8800/adm3a-terminal" class="navigation-list-link">Device adm3a-terminal</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/altair8800/simhPseudo-z80" class="navigation-list-link">Device simhPseudo-z80</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/altair8800/software" class="navigation-list-link">Original software</a></li></ul></li><li class="navigation-list-item"><a href="/documentation/user/0.39/brainduck/" class="navigation-list-link">BrainDuck</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/documentation/user/0.39/brainduck/brainc-compiler" class="navigation-list-link">Compiler</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/brainduck/brainduck-cpu" class="navigation-list-link">CPU</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/brainduck/brainduck-mem" class="navigation-list-link">Memory</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/brainduck/brainduck-terminal" class="navigation-list-link">Terminal</a></li><li class="navigation-list-item "><a href="/documentation/user/0.39/brainduck/automation" class="navigation-list-link">Automation</a></li></ul></li><li class="navigation-list-item"><a href="/documentation/user/0.39/ram/" class="navigation-list-link">RAM</a></li><li class="navigation-list-item"><a href="/documentation/user/0.39/rasp/" class="navigation-list-link">RASP</a></li><li class="navigation-list-item"><a href="/documentation/user/0.39/ssem/" class="navigation-list-link">SSEM</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search User documentation for emuStudio 0.39" aria-label="Search User documentation for emuStudio 0.39" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="/">Back to website</a></li> </ul> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/documentation/user/0.39/altair8800/">MITS Altair8800</a></li> <li class="breadcrumb-nav-list-item"><span>Memory standard-mem</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <div class="sect1"> <h2 id="operating-memory-standard-mem"> <a href="#operating-memory-standard-mem" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Operating memory "standard-mem" </h2> <div class="sectionbody"> <div class="paragraph"> <p>This plug-in emulates an operating memory, in a quite broad meaning. It can be used for any virtual computer which can benefit from the following basic properties:</p> </div> <div class="ulist"> <ul> <li> <p>A memory cell has size of 1 byte (8 bits)</p> </li> <li> <p>Memory cells are linearly ordered (sequential)</p> </li> <li> <p>Each memory cell is accessible by unique address, representing the index of the memory cell, if the memory is imagined as an array of cells</p> </li> </ul> </div> <div class="paragraph"> <p>Besides, the memory supports these additional features:</p> </div> <div class="ulist"> <ul> <li> <p>Setting up ROM (read only memory) ranges</p> </li> <li> <p>Changing memory size; by default it is 64kB</p> </li> <li> <p>Support of bank switching</p> </li> </ul> </div> <div class="paragraph"> <p>There are also some "interactive" features:</p> </div> <div class="ulist"> <ul> <li> <p>Manual loading/saving memory images in either binary or Intel HEX format</p> </li> <li> <p>Ability to automatically load a memory image at startup</p> </li> <li> <p>Intuitive control using keystrokes, and nice visual presentation of the data</p> </li> </ul> </div> <div class="paragraph"> <p>This operating memory is (for now) used only in 8-bit emulator of MITS Altair8800. However it is possible to develop an emulator which can benefit from it.</p> </div> <div class="sect2"> <h3 id="STANDARD-MEM_GUI"> <a href="#STANDARD-MEM_GUI" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> GUI overview </h3> <div class="paragraph"> <p>To open the memory GUI (graphical user interface), click at the right-most icon in the debug toolbar, on the Emulator panel. The window is shown, as in the following image:</p> </div> <div class="imageblock"> <div class="content"> <img src="/documentation/user/0.39/altair8800/images//standard-mem.png" alt="Standard operating memory"> </div> </div> <div class="ulist"> <ul> <li> <p><strong>A</strong>: Open a memory image. Current memory content, if it does not interfere with the loaded data will be kept.</p> </li> <li> <p><strong>B</strong>: Dump (save) whole memory content into a file.</p> </li> <li> <p><strong>C</strong>: Go to address. The address can be either in decimal, hexadecimal (prefix <code>0x</code>) or octal (prefix <code>0</code>) format.</p> </li> <li> <p><strong>D</strong>: Find a sequence. A dialog shows up where user can find either a plain text or sequence of bytes in the memory.</p> </li> <li> <p><strong>E</strong>: Erases all memory content.</p> </li> <li> <p><strong>F</strong>: Shows <a href="#STANDARD-MEM_SETTINGS">memory settings</a></p> </li> <li> <p><strong>G</strong>: By double-clicking on the memory cell it is possible to edit it and change its value. The value format is the same as the input to "go to address" dialog (see <strong>C</strong>).</p> </li> <li> <p><strong>H</strong>: Page of the memory view. The whole memory cannot be shown in single window, because it can be quite large (64 kB by default), so it was divided into pages.</p> </li> <li> <p><strong>I</strong>: If the memory has set up <a href="#STANDARD-MEM_BANKS">memory banks</a>, it is possible to change the view to different bank. Switching in here has no effect on the emulator and on the active bank.</p> </li> <li> <p><strong>J</strong>: Displays the data of the selected cell in various forms.</p> </li> </ul> </div> <div class="paragraph"> <p>Generally, it is possible to move around the cells using keystrokes (arrows). If user presses some other letter/number key, a small text field appears allowing to edit the current value. When editing is finished, user can press ENTER key to confirm it, or ESC key to discard the editing.</p> </div> </div> <div class="sect2"> <h3 id="STANDARD-MEM_SETTINGS"> <a href="#STANDARD-MEM_SETTINGS" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Memory settings </h3> <div class="paragraph"> <p>Settings window can be opened by clicking on "settings" icon in the main GUI window:</p> </div> <div class="imageblock"> <div class="content"> <img src="/documentation/user/0.39/altair8800/images//standard-mem-settings.png" alt="Memory settings"> </div> </div> <div class="ulist"> <ul> <li> <p><strong>A</strong>: Settings for memory bank-switching</p> </li> <li> <p><strong>B</strong>: Settings for ROM areas</p> </li> <li> <p><strong>C</strong>: If checked, settings for ROM areas will be saved to the configuration file</p> </li> <li> <p><strong>D</strong>: List of memory images which will be loaded at startup</p> </li> <li> <p><strong>E</strong>: The button will apply the settings</p> </li> </ul> </div> <div class="paragraph"> <p>ROM areas and memory bank-switching is explained in the following sections.</p> </div> <div class="sect3"> <h4 id="STANDARD-MEM_ROM"> <a href="#STANDARD-MEM_ROM" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> ROM areas </h4> <div class="paragraph"> <p>Some "controllers" - used as embedded devices - usually logically organize memory into areas, some of which are read only, which usually contains the firmware, and some are rewritable. Physically, these memories are wired to specific addresses, so the programmer can access them.</p> </div> <div class="paragraph"> <p>Standard operating memory plug-in emulates this behavior. It allows to define ROM areas which represent read only memory. There can be set up multiple ROM areas, and they can overlap. Effectively it means that memory cells in ROM area cannot be changed from software running on the emulator. All writes to the memory will be ignored.</p> </div> <div class="paragraph"> <p>Manually, as a user it is possible to change the values, but only by loading new memory image. Editing the value will not work.</p> </div> <div class="paragraph"> <p>If a ROM range is defined, it is possible to remove only a part of it, effectively splitting the range and correcting their boundaries. For example, if there is defined a ROM range from 0x0A - 0x64 (see the image above), then it is possible to remove a range e.g. 0x32 - 0x46, which is the part of defined ROM area. Then, the original ROM area is split into two parts - first will be a range from 0x0A - 0x31, and the second from 0x47 - 0x64.</p> </div> </div> <div class="sect3"> <h4 id="STANDARD-MEM_BANKS"> <a href="#STANDARD-MEM_BANKS" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Memory bank-switching </h4> <div class="paragraph"> <p>This technique was invented as a workaround for a problem when the address space of a processor was smaller than memory size. In order to overcome this issue, memory was logically split into many regions of size equal to the processor address space. These regions are called "banks".</p> </div> <div class="paragraph"> <p>Physically, banks could refer to the same memory, but they could be also different memories (e.g. external cartridges), and the bank-switching involved switching the active memory.</p> </div> <div class="paragraph"> <p>Selecting a bank from a programming perspective was usually done by writing some code to some I/O port using some I/O instruction of a CPU. But it can be implemented in various ways, e.g. some memory addresses can be used for selecting a bank.</p> </div> <div class="paragraph"> <p>Also, it was very common that some part of the address space still kept some common memory part which was never switched out. This part is called a "common" part. In emuStudio, common part starts with the <code>Common</code> address (as it can be seen in the Settings dialog image above) and ends till the rest of the CPU address space (or memory end).</p> </div> <div class="paragraph"> <p>To summarize, let&#8217;s consider an example. If a CPU is 8-bit, it means it has address space of size 2^8 - i.e. it can access memory from address 0 to (2^8 - 1). If the memory was larger, CPU just doesn&#8217;t allow to access higher memory cells. So memory bank-switching is coming for the rescue. If the memory has 2 MB, we require <code>2^log2(2MB) = 2^21</code> addresses. So, if we won&#8217;t have any common address space, we require <code>ceil(21 / 8) = 3</code> banks:</p> </div> <div class="ulist"> <ul> <li> <p>bank 0: maps from 0 - (2^8 - 1)</p> </li> <li> <p>bank 1: maps from 2^8 - (2^16 - 1)</p> </li> <li> <p>bank 2: maps from 2^16 - (2^21 - 1)</p> </li> </ul> </div> </div> </div> <div class="sect2"> <h3 id="STANDARD-MEM_CONFIG_FILE"> <a href="#STANDARD-MEM_CONFIG_FILE" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Configuration file </h3> <div class="paragraph"> <p>Configuration file of virtual computers contain also settings of all the used plug-ins, including devices. Please read the section "Accessing settings of plug-ins" in the user documentation of Main module to see how the settings can be accessed.</p> </div> <div class="paragraph"> <p>The following table shows all the possible settings of Standard operating memory plug-in:</p> </div> <div class="table-wrapper"><table class="tableblock frame-topbot grid-all spread table table-striped table-condensed"> <caption class="title">Table 1. Settings of Standard operating memory</caption> <colgroup> <col style="width: 25%;"> <col style="width: 25%;"> <col style="width: 25%;"> <col style="width: 25%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Default value</th> <th class="tableblock halign-left valign-top">Valid values</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tfoot> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>imageAddress</code>(i)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">&gt;= 0 and &lt; mem size</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The i-th memory image load address</p></td> </tr> </tfoot> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>banksCount</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">&gt;= 0</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Number of memory banks</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>commonBoundary</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">&gt;= 0 and &lt; mem size</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Address from which the banks are shared</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>memorySize</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">65536</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">&gt; 0</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Memory size in bytes</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ROMfrom</code>(i)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">&gt;= 0 and &lt; mem size</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Start of the i-th ROM area</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>ROMto</code>(i)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">&gt;= <code>ROMfrom</code>(i) and &lt; mem size</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">End of the i-th ROM area</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>imageName</code>(i)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">file path</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The i-th memory image file name. <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup></p></td> </tr> </tbody> </table></div> </div> <div class="sect2"> <h3 id="using-memory-in-custom-computers"> <a href="#using-memory-in-custom-computers" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Using memory in custom computers </h3> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> This section is for developers of emulators. If you do not plan to create custom virtual computers, you can safely skip this section. In order to get started with developing plug-ins for emuStudio, please read tutorial "Developing emuStudio Plugins". </td> </tr> </table></div> </div> <div class="paragraph"> <p>As it was mentioned in the earlier sections, the Standard operating memory plug-in can be used in other computers, too. Besides standard operations which are provided by <code>emulib.plugins.memory.MemoryContext</code> interface, it provides custom context API, enabling to use more features - e.g. bank-switching.</p> </div> <div class="paragraph"> <p>You can obtain the context during the <code>initialize()</code> method of plug-in main class. The context is named <code>net.sf.net.emustudio.memory.standard.StandardMemoryContext</code>:</p> </div> <div class="listingblock"> <div class="content"><pre class="pygments highlight"><code data-lang="java"><span style="color: #666666">...</span>

<span style="color: #008000; font-weight: bold">public</span> <span style="color: #B00040">void</span> <span style="color: #0000FF">initialize</span><span style="color: #666666">(</span>SettingsManager settings<span style="color: #666666">)</span> <span style="color: #666666">{</span>
    <span style="color: #666666">...</span>

    StandardMemoryContext mem <span style="color: #666666">=</span> contextPoolImpl<span style="color: #666666">.</span><span style="color: #7D9029">getMemoryContext</span><span style="color: #666666">(</span>pluginID<span style="color: #666666">,</span> StandardMemoryContext<span style="color: #666666">.</span><span style="color: #7D9029">class</span><span style="color: #666666">);</span>
    <span style="color: #666666">...</span>
<span style="color: #666666">}</span></code></pre></div> </div> <div class="paragraph"> <p>The memory context has the following content:</p> </div> <div class="listingblock"> <div class="content"><pre class="pygments highlight"><code data-lang="java"><span style="color: #008000; font-weight: bold">package</span> <span style="color: #0000FF; font-weight: bold">net.sf.emustudio.memory.standard</span><span style="color: #666666">;</span>

<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">emulib.annotations.ContextType</span><span style="color: #666666">;</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">emulib.plugins.memory.MemoryContext</span><span style="color: #666666">;</span>

<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">java.util.List</span><span style="color: #666666">;</span>

<span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic"> * Extended memory context.</span>
<span style="color: #408080; font-style: italic"> *</span>
<span style="color: #408080; font-style: italic"> * Supports bank switching, ROM ranges, and loading HEX/BIN files.</span>
<span style="color: #408080; font-style: italic"> */</span>
<span style="color: #AA22FF">@ContextType</span><span style="color: #666666">(</span>id <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;Standard memory&quot;</span><span style="color: #666666">)</span>
<span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">interface</span> <span style="color: #0000FF; font-weight: bold">StandardMemoryContext</span> <span style="color: #008000; font-weight: bold">extends</span> MemoryContext<span style="color: #666666">&lt;</span>Short<span style="color: #666666">&gt;</span> <span style="color: #666666">{</span>

    <span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic">     * This interface represents a range of addresses in the memory.</span>
<span style="color: #408080; font-style: italic">     */</span>
    <span style="color: #008000; font-weight: bold">interface</span> <span style="color: #0000FF; font-weight: bold">AddressRange</span> <span style="color: #666666">{</span>
        <span style="color: #B00040">int</span> <span style="color: #0000FF">getStartAddress</span><span style="color: #666666">();</span>
        <span style="color: #B00040">int</span> <span style="color: #0000FF">getStopAddress</span><span style="color: #666666">();</span>
    <span style="color: #666666">}</span>

    <span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic">     * Determine whether specified memory position is read-only.</span>
<span style="color: #408080; font-style: italic">     *</span>
<span style="color: #408080; font-style: italic">     * @param address memory position</span>
<span style="color: #408080; font-style: italic">     * @return true if the memory position is read only, false otherwise</span>
<span style="color: #408080; font-style: italic">     */</span>
    <span style="color: #B00040">boolean</span> <span style="color: #0000FF">isROM</span><span style="color: #666666">(</span><span style="color: #B00040">int</span> address<span style="color: #666666">);</span>

    <span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic">     * Get list of ranges of read-only addresses.</span>
<span style="color: #408080; font-style: italic">     *</span>
<span style="color: #408080; font-style: italic">     * @return list of ROM memory addresses</span>
<span style="color: #408080; font-style: italic">     */</span>
    List<span style="color: #666666">&lt;?</span> <span style="color: #008000; font-weight: bold">extends</span> AddressRange<span style="color: #666666">&gt;</span> <span style="color: #0000FF">getROMRanges</span><span style="color: #666666">();</span>

    <span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic">     * Set specified memory range as RAM (Random Access Memory).</span>
<span style="color: #408080; font-style: italic">     *</span>
<span style="color: #408080; font-style: italic">     * @param range address range</span>
<span style="color: #408080; font-style: italic">     */</span>
    <span style="color: #B00040">void</span> <span style="color: #0000FF">setRAM</span><span style="color: #666666">(</span>AddressRange range<span style="color: #666666">);</span>

    <span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic">     * Set specified memory range as ROM (Read Only Memory).</span>
<span style="color: #408080; font-style: italic">     *</span>
<span style="color: #408080; font-style: italic">     * @param range address range</span>
<span style="color: #408080; font-style: italic">     */</span>
    <span style="color: #B00040">void</span> <span style="color: #0000FF">setROM</span><span style="color: #666666">(</span>AddressRange range<span style="color: #666666">);</span>

    <span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic">     * Get number of available memory banks.</span>
<span style="color: #408080; font-style: italic">     *</span>
<span style="color: #408080; font-style: italic">     * @return count of memory banks</span>
<span style="color: #408080; font-style: italic">     */</span>
    <span style="color: #B00040">int</span> <span style="color: #0000FF">getBanksCount</span><span style="color: #666666">();</span>

    <span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic">     * Get index of the selected memory bank.</span>
<span style="color: #408080; font-style: italic">     *</span>
<span style="color: #408080; font-style: italic">     * @return index of active (selected) memory bank</span>
<span style="color: #408080; font-style: italic">     */</span>
    <span style="color: #B00040">short</span> <span style="color: #0000FF">getSelectedBank</span><span style="color: #666666">();</span>

    <span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic">     * Select (set as active) a memory bank.</span>
<span style="color: #408080; font-style: italic">     *</span>
<span style="color: #408080; font-style: italic">     * @param bankIndex index (number) of a bank which should be selected</span>
<span style="color: #408080; font-style: italic">     */</span>
    <span style="color: #B00040">void</span> <span style="color: #0000FF">selectBank</span><span style="color: #666666">(</span><span style="color: #B00040">short</span> bankIndex<span style="color: #666666">);</span>

    <span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic">     * Return an address in the memory which represents a boundary from which</span>
<span style="color: #408080; font-style: italic">     * the memory banks have the same content. Before this address all banks</span>
<span style="color: #408080; font-style: italic">     * can have different content.</span>
<span style="color: #408080; font-style: italic">     *</span>
<span style="color: #408080; font-style: italic">     * @return common boundary address</span>
<span style="color: #408080; font-style: italic">     */</span>
    <span style="color: #B00040">int</span> <span style="color: #0000FF">getCommonBoundary</span><span style="color: #666666">();</span>

    <span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic">     * Loads a HEX file into the memory.</span>
<span style="color: #408080; font-style: italic">     *</span>
<span style="color: #408080; font-style: italic">     * @param filename file name</span>
<span style="color: #408080; font-style: italic">     * @param bank bank index</span>
<span style="color: #408080; font-style: italic">     * @return true if the file was loaded successfully, false otherwise</span>
<span style="color: #408080; font-style: italic">     */</span>
    <span style="color: #B00040">boolean</span> <span style="color: #0000FF">loadHex</span><span style="color: #666666">(</span>String filename<span style="color: #666666">,</span> <span style="color: #B00040">int</span> bank<span style="color: #666666">);</span>

    <span style="color: #408080; font-style: italic">/**</span>
<span style="color: #408080; font-style: italic">     * Loads a binary file into the memory.</span>
<span style="color: #408080; font-style: italic">     *</span>
<span style="color: #408080; font-style: italic">     * @param filename file name</span>
<span style="color: #408080; font-style: italic">     * @param address location in the memory</span>
<span style="color: #408080; font-style: italic">     * @param bank bank index</span>
<span style="color: #408080; font-style: italic">     * @return true if the file was loaded successfully, false otherwise</span>
<span style="color: #408080; font-style: italic">     */</span>
    <span style="color: #B00040">boolean</span> <span style="color: #0000FF">loadBin</span><span style="color: #666666">(</span>String filename<span style="color: #666666">,</span> <span style="color: #B00040">int</span> address<span style="color: #666666">,</span> <span style="color: #B00040">int</span> bank<span style="color: #666666">);</span>

<span style="color: #666666">}</span></code></pre></div> </div> </div> </div> </div> <div id="footnotes"> <hr> <div class="footnote" id="_footnote_1"> <a href="#_footnoteref_1">1</a>. If it ends with <code>.hex</code> suffix, it will be loaded as Intel HEX format, otherwise as binary </div> </div> </div> </div> </div> </div> </body> </html>
