<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Compiler - User documentation for emuStudio 0.40</title> <link rel="shortcut icon" href="/documentation/user/0.40/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/documentation/user/0.40/assets/css/just-the-docs.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3492956-5"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', "UA-3492956-5"); </script> <script type="text/javascript" src="/documentation/user/0.40/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/documentation/user/0.40/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Compiler | User documentation for emuStudio 0.40</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="Compiler" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="User documentation for emuStudio 0.40. emuStudio is universal emulation platform and framework targeting mainly academic sphere." /> <meta property="og:description" content="User documentation for emuStudio 0.40. emuStudio is universal emulation platform and framework targeting mainly academic sphere." /> <link rel="canonical" href="/documentation/user/0.40/docs/brainduck/brainc-compiler.html" /> <meta property="og:url" content="/documentation/user/0.40/docs/brainduck/brainc-compiler.html" /> <meta property="og:site_name" content="User documentation for emuStudio 0.40" /> <script type="application/ld+json"> {"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/documentation/user/0.40/assets/logo-1.svg"}},"description":"User documentation for emuStudio 0.40. emuStudio is universal emulation platform and framework targeting mainly academic sphere.","@type":"WebPage","headline":"Compiler","url":"/documentation/user/0.40/docs/brainduck/brainc-compiler.html","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="/documentation/user/0.40" class="site-title lh-tight"> <div class="site-logo"></div> </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item active"><a href="/documentation/user/0.40/404.html" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="/documentation/user/0.40/about/" class="navigation-list-link">About emuStudio</a></li><li class="navigation-list-item active"><a href="/documentation/user/0.40/docs/ram/abstractTape-ram.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.40/" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.40/docs/ram/ram-cpu.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.40/docs/ram/ram-intro.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.40/docs/ram/ram-mem.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.40/docs/ram/ramc-ram.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.40/docs/rasp/rasp-cpu.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.40/docs/rasp/rasp-intro.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.40/docs/rasp/rasp-mem.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="/documentation/user/0.40/docs/rasp/raspc-rasp.html" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="/documentation/user/0.40/docs/main-module/" class="navigation-list-link">Main module</a><ul class="navigation-list-child-list "></ul></li><li class="navigation-list-item"><a href="/documentation/user/0.40/docs/mits_altair_8800/" class="navigation-list-link">MITS Altair8800</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/mits_altair_8800/as-8080.html" class="navigation-list-link">Assembler as-8080</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/mits_altair_8800/as-z80.html" class="navigation-list-link">Assembler as-z80</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/mits_altair_8800/8080-cpu.html" class="navigation-list-link">CPU 8080-cpu</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/mits_altair_8800/z80-cpu.html" class="navigation-list-link">CPU z80-cpu</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/mits_altair_8800/standard-mem.html" class="navigation-list-link">Memory standard-mem</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/mits_altair_8800/88-disk.html" class="navigation-list-link">Device 88-disk</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/mits_altair_8800/88-sio.html" class="navigation-list-link">Device 88-sio</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/mits_altair_8800/adm3a-terminal.html" class="navigation-list-link">Device adm3a-terminal</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/mits_altair_8800/simhPseudo-z80.html" class="navigation-list-link">Device simhPseudo-z80</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/mits_altair_8800/software.html" class="navigation-list-link">Original software</a></li></ul></li><li class="navigation-list-item active"><a href="/documentation/user/0.40/docs/brainduck/" class="navigation-list-link">BrainDuck</a><ul class="navigation-list-child-list "><li class="navigation-list-item active"><a href="/documentation/user/0.40/docs/brainduck/brainc-compiler.html" class="navigation-list-link active">Compiler</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/brainduck/brainduck-cpu.html" class="navigation-list-link">CPU</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/brainduck/brainduck-mem.html" class="navigation-list-link">Memory</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/brainduck/brainduck-terminal.html" class="navigation-list-link">Terminal</a></li><li class="navigation-list-item "><a href="/documentation/user/0.40/docs/brainduck/automation.html" class="navigation-list-link">Automation</a></li></ul></li><li class="navigation-list-item"><a href="/documentation/user/0.40/docs/ram/" class="navigation-list-link">RAM</a></li><li class="navigation-list-item"><a href="/documentation/user/0.40/docs/rasp/" class="navigation-list-link">RASP</a></li><li class="navigation-list-item"><a href="/documentation/user/0.40/docs/ssem/" class="navigation-list-link">SSEM</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search User documentation for emuStudio 0.40" aria-label="Search User documentation for emuStudio 0.40" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="/">Back to website</a></li> </ul> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/documentation/user/0.40/docs/brainduck/">BrainDuck</a></li> <li class="breadcrumb-nav-list-item"><span>Compiler</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <div class="sect1"> <h2 id="compiler-brainc-brainduck"> <a href="#compiler-brainc-brainduck" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Compiler "brainc-brainduck" </h2> <div class="sectionbody"> <div class="paragraph"> <p>BrainDuck compiler is used as a part of BrainDuck computer, which acts as a translator of <strong>brainfuck</strong> "human-readable" language into binary form, used by BrainDuck CPU. Those instructions and their binary codes have no relation with brainfuck itself, therefore the computer is not called <strong>brainfuck computer</strong>, because it is <strong>not</strong> brainfuck. But it does not mean you cannot write and run brainfuck programs in it :)</p> </div> <div class="paragraph"> <p>At first, each compiler, including BrainDuck compiler, provides lexical analyzer for help with tokenize of the source code, used in syntax highlighting. Secondly, the compile <strong>compiles</strong> the source code into other (usually binary) form which is then understood by CPU.</p> </div> <div class="paragraph"> <p>Compilation takes part by user request (clicking on 'compile' icon in the main window). After compilation is successful, the compiler usually loads the translated program into operating memory, and saves the translation into a file. So it is with BrainDuck compiler. Files have <code>.hex</code> extension.<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup></p> </div> <div class="sect2"> <h3 id="XCI"> <a href="#XCI" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Installation and run </h3> <div class="paragraph"> <p>The compiler is provided as part of emuStudio. It is not deployed as individual package. The compiler can be found in <code>compilers/</code> directory with name <code>brainc-brainduck.jar</code>.</p> </div> <div class="paragraph"> <p>The compiler can be run from command line, with command:</p> </div> <div class="literalblock"> <div class="content"><pre>java -jar brainc-brainduck.jar [--output output_file.hex] [source_file.b]</pre></div> </div> <div class="paragraph"> <p>To query for more information, run the compiler with command:</p> </div> <div class="literalblock"> <div class="content"><pre>java -jar brainc-brainduck.jar --help</pre></div> </div> <div class="paragraph"> <p>Using compiler in command line might be useful for emulation automation.</p> </div> </div> <div class="sect2"> <h3 id="XCS"> <a href="#XCS" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Language Syntax </h3> <div class="paragraph"> <p>The language of BrainDuck compiler is almost identical with the original brainfuck. However, brainfuck interpreter is not specified well-enough, so there are open questions how to treat with some special situations, which are described below.</p> </div> <div class="paragraph"> <p>Generally, the language knows eight instructions. They are best described when they are compared with C language equivalent. Brainfuck uses only single data pointer called <code>P</code>, pointing to bounded memory.<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnote_2" title="View footnote.">2</a>]</sup></p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> BrainDuck architecture conforms to true von-Neumann model, instead of classic Harvard-style interpreters. It means that program memory and data memory are not separated. The data pointer is therefore not initialized to 0 as programmers might expect and potentially there can be written brainfuck programs with self-modifications. </td> </tr> </table></div> </div> <div class="table-wrapper"><table class="tableblock frame-top grid-all spread table table-striped table-condensed"> <caption class="title">Table 1. Brainfuck instructions</caption> <colgroup> <col style="width: 50%;"> <col style="width: 50%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Brainfuck instruction</th> <th class="tableblock halign-left valign-top">C language equivalent</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>P++</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>P--</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>++*P</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>--*P</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>,</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>*P = getchar()</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>.</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>putchar(*P);</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>[</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>while (*P) {</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>]</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>}</code></p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>The compiler is supplied with many example programms written in brainfuck.</p> </div> </div> <div class="sect2"> <h3 id="XCD"> <a href="#XCD" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Additional details </h3> <div class="paragraph"> <p>As was said before, specification of brainfuck language or interpreter implementation is not complete. There are left some details which might be solved differently in different implementations. In this version of BrainDuck implementation in emuStudio, the details are solved in the fixed way, as described below.</p> </div> <div class="sect3"> <h4 id="XCDC"> <a href="#XCDC" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Comments </h4> <div class="paragraph"> <p>The compiler takes as a comment everything which is not the brainfuck instruction. From the first occurence of unknown character, everything to the end of the line is treated as comment. Exceptions are whitespaces, tabulators, and newlines.<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnote_3" title="View footnote.">3</a>]</sup></p> </div> <div class="paragraph"> <p>In the following example, everything starting with <code>#</code> is treated as comment, up to end of the line.</p> </div> <div class="literalblock"> <div class="content"><pre>++++[-] # Useless program in brainfuck. [-] clears the content of the memory cell.</pre></div> </div> </div> <div class="sect3"> <h4 id="XCDS"> <a href="#XCDS" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Cell size </h4> <div class="paragraph"> <p>The memory cells are of 8-bit size (cells are bytes).</p> </div> </div> <div class="sect3"> <h4 id="XCDS"> <a href="#XCDS" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Memory size </h4> <div class="paragraph"> <p>The memory size is defined in <code>brainduck-mem</code> plug-in. In this version of emuStudio, it is 65536 cells.</p> </div> </div> <div class="sect3"> <h4 id="XCDE"> <a href="#XCDE" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> End-of-line code </h4> <div class="paragraph"> <p>EOL is defined in <code>brainduck-terminal</code> plug-in. In the current version of emuStudio, it is a Newline character with ASCII code 10.</p> </div> </div> <div class="sect3"> <h4 id="XCDF"> <a href="#XCDF" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> End-of-file behavior </h4> <div class="paragraph"> <p>EOF is defined in <code>brainduck-cpu</code> and <code>brainduck-terminal</code> plug-ins. In the current version of emuStudio, current cell (where <code>P</code> is pointing at) is changed to value 0.<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnote_4" title="View footnote.">4</a>]</sup></p> </div> </div> </div> </div> </div> <div id="footnotes"> <hr> <div class="footnote" id="_footnote_1"> <a href="#_footnoteref_1">1</a>. Intel HEX format, for more info see <a href="http://en.wikipedia.org/wiki/Intel_HEX" class="bare">http://en.wikipedia.org/wiki/Intel_HEX</a> </div> <div class="footnote" id="_footnote_2"> <a href="#_footnoteref_2">2</a>. The boundary is specified in <code>brainduck-mem</code> plug-in </div> <div class="footnote" id="_footnote_3"> <a href="#_footnoteref_3">3</a>. This practically means that it is impossible to write brainfuck program with syntax errors. </div> <div class="footnote" id="_footnote_4"> <a href="#_footnoteref_4">4</a>. This is not how original brainfuck behaves, which is doing no change to the cell on EOF </div> </div> </div> </div> </div> </div> </body> </html>
